"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[464],{3741:function(e,t,a){function n(e){const t=Array.from(String(e));return 6===t.length?t.join("").slice(0,2)+"万":7===t.length?t.join("").slice(0,3)+"万":8===t.length?t.join("").slice(0,4)+"万":9===t.length?t.join("").slice(0,1)+"亿":10===t.length?t.join("").slice(0,2)+"亿":11===t.length?t.join("").slice(0,3)+"亿":e}a.d(t,{u:function(){return n}})},401:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var n=a(970),l=(a(451),a(2980)),o=a(6097),r=(a(2760),a(3396)),s=a(7139),c=a(4870),u=a(3741),i=a(2483),m=a(65);const d=e=>((0,r.pushScopeId)("data-v-68e8c288"),e=e(),(0,r.popScopeId)(),e),p=d((()=>(0,r.createElementVNode)("p",{style:{"font-size":"13px","margin-top":"30px"}},"你可能感兴趣的",-1))),f={key:0,class:"multimatch"},g={class:"img"},h=["src"],v={class:"text"},k={key:0},N={class:"img"},V=["src"],w={class:"text"},E={class:"img"},y=["src"],C={class:"text"},B={class:"img"},z=["src"],_={class:"text"};var b={__name:"multimatch-page",props:{},setup(e,{emit:t}){const a=(0,m.useStore)(),n=(0,i.tv)(),l=(0,i.yj)(),o=(0,c.ref)();(0,r.watch)((()=>l.query.value),(e=>{"search"==l.name&&(console.log("object-----------"),a.dispatch("search/getMultimatch",e).then((e=>{console.log(e.result.orders),o.value=e.result})))}),{immediate:!0});const d=e=>{console.log(e),n.push({path:"/singerDetailPage",query:{id:e.id}})},b=e=>{console.log(e),n.push({path:"/albumDetailPage",query:{ids:e.id}})},x=e=>{console.log(e),n.push({path:"songMenuDetailPage",query:{id:e.id}})},I=e=>{console.log(e),n.push({path:"/mainVideo",query:{mvId:e.resourceId}})};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[p,(0,c.unref)(o)?((0,r.openBlock)(),(0,r.createElementBlock)("div",f,[(0,c.unref)(o).orders.find((e=>"artist"==e))?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"artist",onClick:t[0]||(t[0]=e=>d((0,c.unref)(o).artist[0]))},[(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("img",{src:(0,c.unref)(o).artist[0].img1v1Url,alt:""},null,8,h)]),(0,r.createElementVNode)("div",v,[(0,r.createElementVNode)("span",null,[(0,r.createTextVNode)(" 歌手: "+(0,s.zw)((0,c.unref)(o).artist[0].name)+" ",1),(0,c.unref)(o).artist[0].alias?((0,r.openBlock)(),(0,r.createElementBlock)("span",k,"("+(0,s.zw)((0,c.unref)(o).artist[0].alias[0])+")",1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("span",null," 粉丝 "+(0,s.zw)((0,c.unref)(u.u)((0,c.unref)(o).artist[0].fansSize))+", ",1),(0,r.createElementVNode)("span",null," 歌曲 "+(0,s.zw)((0,c.unref)(o).artist[0].musicSize),1)])])])):(0,r.createCommentVNode)("",!0),(0,c.unref)(o).orders.find((e=>"album"==e))?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"album",onClick:t[1]||(t[1]=e=>b((0,c.unref)(o).album[0]))},[(0,r.createElementVNode)("div",N,[(0,r.createElementVNode)("img",{src:(0,c.unref)(o).album[0].picUrl,alt:""},null,8,V)]),(0,r.createElementVNode)("div",w,[(0,r.createElementVNode)("span",null,(0,s.zw)((0,c.unref)(o).album[0].type+": "+(0,c.unref)(o).album[0].name),1),(0,r.createElementVNode)("div",null,(0,s.zw)((0,c.unref)(o).album[0].artist.name)+",",1)])])):(0,r.createCommentVNode)("",!0),(0,c.unref)(o).orders.find((e=>"playlist"==e))?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:"playlist",onClick:t[2]||(t[2]=e=>x((0,c.unref)(o).playlist[0]))},[(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("img",{src:(0,c.unref)(o).playlist[0].coverImgUrl,alt:""},null,8,y)]),(0,r.createElementVNode)("div",C,[(0,r.createElementVNode)("span",null,"歌单: "+(0,s.zw)((0,c.unref)(o).playlist[0].name),1),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("span",null," 歌曲"+(0,s.zw)((0,c.unref)(o).playlist[0].trackCount)+", ",1),(0,r.createElementVNode)("span",null," 歌曲"+(0,s.zw)((0,c.unref)(u.u)((0,c.unref)(o).playlist[0].playCount)),1)])])])):(0,r.createCommentVNode)("",!0),(0,c.unref)(o).orders.find((e=>"new_mlog"==e))?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:3,class:"new_mlog",onClick:t[3]||(t[3]=e=>I((0,c.unref)(o).new_mlog[0]))},[(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("img",{src:(0,c.unref)(o).new_mlog[0].baseInfo.resource.mlogBaseData.coverUrl,alt:""},null,8,z)]),(0,r.createElementVNode)("div",_,[(0,r.createElementVNode)("span",null,(0,s.zw)((0,c.unref)(o).new_mlog[0].resourceName+":"+(0,c.unref)(o).new_mlog[0].baseInfo.resource.mlogBaseData.text),1)])])):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0)],64))}},x=a(89);const I=(0,x.Z)(b,[["__scopeId","data-v-68e8c288"]]);var q=I;const P=e=>((0,r.pushScopeId)("data-v-25203d4f"),e=e(),(0,r.popScopeId)(),e),S={class:"total"},j=["onClick"],M=["onClick"],D=P((()=>(0,r.createElementVNode)("span",null," / ",-1))),L=["onClick"];var U={__name:"search-page",setup(e){const t=(0,i.yj)(),a=(0,m.useStore)(),u=(0,i.tv)(),d=(0,c.ref)({limit:30,offset:1}),p=(0,c.ref)(),f=e=>{a.dispatch("search/getSearchList",{keyword:t.query.value,limit:d.value.limit,offset:e*d.value.limit})};(0,r.watch)((()=>t.query.value),(e=>{"search"==t.name&&f(0)})),f(0);const g=(0,r.computed)((()=>a.state.search.songsList)),h=(0,c.ref)(!1);(0,r.watch)((()=>g.value),(e=>{a.commit("songMenu/changePrivileges",e),0!=e.length&&(h.value=!0)})),(0,r.watch)((()=>d.value.offset),(e=>{console.log(e),h.value=!1,a.state.search.songsList=[],p.value.scrollTop=0,f(e-1)}));const v=(0,r.computed)((()=>a.state.search.songCount)),k=e=>{a.dispatch("playMusic/dispatchMusicInfo",e),a.commit("songMenu/CurrentMenuList",g.value)},N=e=>{console.log(e),u.push({path:"/singerDetailPage",query:{id:e}})},V=e=>{console.log(e),u.push({path:"/albumDetailPage",query:{ids:e}})};return(e,a)=>{const u=o.R,i=l.Z,m=n.Mr;return(0,r.openBlock)(),(0,r.createBlock)(m,{class:"search_page",ref_key:"searchPageRef",ref:p},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("span",{ref:"searchTitle"},"搜索 "+(0,s.zw)((0,c.unref)(t).query.value),513),(0,r.createElementVNode)("div",S,"共找到 "+(0,s.zw)((0,c.unref)(v))+"单曲",1),(0,r.createVNode)(q),(0,r.createVNode)(i,{songList:(0,c.unref)(g),class:"songs_list",ref:"paginationRef",onOnhandleClick:k},{author:(0,r.withCtx)((e=>[(0,r.createElementVNode)("span",{onClick:t=>N(e.row.author[0].id),class:"cursorHover"},(0,s.zw)(e.row.author[0].name),9,j),e.row.author[1]?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,onClick:t=>N(e.row.author[1].id),class:"cursorHover"},[D,(0,r.createTextVNode)(" "+(0,s.zw)(e.row.author[1].name),1)],8,M)):(0,r.createCommentVNode)("",!0)])),album:(0,r.withCtx)((e=>[(0,r.createElementVNode)("span",{onClick:t=>V(e.row.songsInfo.id),class:"cursorHover"},(0,s.zw)(e.row.album),9,L)])),default:(0,r.withCtx)((()=>[(0,c.unref)(h)?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0,background:"",layout:"prev, pager, next",total:(0,c.unref)(v),currentPage:(0,c.unref)(d).offset,"onUpdate:currentPage":a[0]||(a[0]=e=>(0,c.unref)(d).offset=e),"page-size":(0,c.unref)(d).limit,"onUpdate:page-size":a[1]||(a[1]=e=>(0,c.unref)(d).limit=e),class:"pageination"},null,8,["total","currentPage","page-size"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["songList"])])),_:1},512)}}};const T=(0,x.Z)(U,[["__scopeId","data-v-25203d4f"]]);var H=T}}]);
//# sourceMappingURL=search.ca473942.js.map