"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[213],{3741:function(e,t,n){function o(e){const t=Array.from(String(e));return 6===t.length?t.join("").slice(0,2)+"万":7===t.length?t.join("").slice(0,3)+"万":8===t.length?t.join("").slice(0,4)+"万":9===t.length?t.join("").slice(0,1)+"亿":10===t.length?t.join("").slice(0,2)+"亿":11===t.length?t.join("").slice(0,3)+"亿":e}n.d(t,{u:function(){return o}})},9654:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(970),a=(n(451),n(3396)),l=n(7139),r=n(9242);const s={class:"categorytbas"},c={class:"tabs_songMenu"},i={class:"tabs_select"},u={class:"conent"},d={key:0,class:"total_Menu"},p={class:"headre"},m={class:"category"};var f={__name:"categoryTabs",props:{hotTags:{type:Array,default:[]},tags:{type:Array,default:[]},isCategory:{type:Boolean,default:!1}},setup(e,{emit:t}){return(t,n)=>{const f=o.Mr;return(0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",i,[(0,a.renderSlot)(t.$slots,"All")]),(0,a.createElementVNode)("div",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.hotTags,((e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:n,class:"tabs_text"},[(0,a.renderSlot)(t.$slots,"hotTabs",(0,l.vs)((0,a.guardReactiveProps)(e)))])))),128))])]),(0,a.withDirectives)((0,a.createElementVNode)("div",u,[e.isCategory?((0,a.openBlock)(),(0,a.createElementBlock)("div",d,[(0,a.createElementVNode)("div",p,[(0,a.renderSlot)(t.$slots,"tabsHeadre")]),(0,a.createVNode)(f,{"max-height":"400px"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",m,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.tags,((e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:n,class:"category_items"},[(0,a.renderSlot)(t.$slots,"tags",(0,a.mergeProps)(e,{class:"tags_select"}))])))),128))])])),_:3})])):(0,a.createCommentVNode)("",!0)],512),[[r.F8,e.tags]])])}}},v=n(89);const g=(0,v.Z)(f,[["__scopeId","data-v-8666bd6c"]]);var h=g},4639:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var o=n(3247),a=(n(6588),n(7488)),l=(n(9406),n(9776)),r=(n(6885),n(4902)),s=(n(8839),n(9623)),c=(n(4566),n(1015)),i=(n(8474),n(3396)),u=n(4870),d=n(9242),p=n(7139),m=n(3741),f=n(6757),v=n(5399),g=(n(6773),n(65)),h=n(2483);const y=e=>((0,i.pushScopeId)("data-v-6b878b54"),e=e(),(0,i.popScopeId)(),e),k=["infinite-scroll-disabled"],b={class:"test"},C={class:"item"},N=["onClick"],_=["onMouseover"],E=y((()=>(0,i.createElementVNode)("source",{type:"image/webp"},null,-1))),w=["src"],V={class:"icon shanjiao","aria-hidden":"true"},B=y((()=>(0,i.createElementVNode)("use",{"xlink:href":"#icon-playfill-copy"},null,-1))),x=[B],T={class:"playCount"},j={class:"video_durationms"},S=["onClick"],$={class:"author"},q=["onClick"],A={key:1};var M={__name:"listVideo",setup(e,{emit:t}){const n={xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:6}},y=(0,u.ref)(!1),B=(0,g.useStore)(),M=(0,h.tv)(),H=(0,h.yj)(),I=(0,u.ref)([]),L=(0,u.ref)(),Z=(0,u.ref)(),R=e=>{Z.value=e.target.scrollTop};(0,i.onActivated)((()=>{console.log("缓存"),L.value.scrollTop=Z.value}));const z=(0,u.reactive)({offset:0,id:58100}),D=e=>{B.dispatch("video/getVideoGroups",e).then((e=>{I.value=e;try{I.value.length<10&&U()}catch(t){console.log(t)}}))};D(z),(0,i.watch)((()=>B.getters["video/getTags"]),(e=>{I.value=[],console.log("------------------------------------",e),z.offset=0,z.id=e.id,D(z)}));const O=(0,u.ref)(!1);let F=null;const P=(e,t)=>{clearInterval(F),t.data.previewUrl?(e.path[1].firstChild.setAttribute("srcset",t.data.previewUrl),F=setTimeout((()=>{e.path[1].firstChild?.setAttribute("srcset",""),O.value=t.data.vid}),5500)):O.value=t.data.vid||t.data.id},G=e=>{clearInterval(F),O.value=0,e.path[0].firstChild?.setAttribute("srcset","")},K=(0,u.ref)(!1),U=()=>{console.log("加载更多-------------"),z.offset+=8,console.log(z);const e=setTimeout((()=>{y.value=!0}),500);try{B.dispatch("video/getVideoGroups",z).then((t=>{clearTimeout(e),y.value=!1,I.value.push(...t)}))}catch(t){console.log("禁用滚动条"),K.value=!0}},J=e=>{console.log(typeof H.query.tag),1e3===parseInt(H.query.tag)?(console.log("MV"),console.log(e),M.push({path:"/mainVideo",query:{mvId:e.data.id}})):M.push({path:"/mainVideo",query:{vid:e.data.vid}})},Q=e=>{console.log(e),M.push({path:"/profilePage",query:{id:e.userId}})};return(e,t)=>{const g=(0,i.resolveComponent)("VideoPlay"),h=c.gn,B=s.Q0,M=r.Dv,H=l.dq,Z=a.mR,z=o.n;return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,u.unref)(I).length?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"video_tabs_list",ref_key:"video",ref:L,"infinite-scroll-distance":500,"infinite-scroll-delay":500,"infinite-scroll-immediate":"","infinite-scroll-disabled":(0,u.unref)(K),onScroll:R},[(0,i.createElementVNode)("div",b,[(0,i.createVNode)(H,{gutter:30},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,u.unref)(I),(e=>((0,i.openBlock)(),(0,i.createBlock)(M,(0,i.mergeProps)({span:6,key:e},n),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",C,[(0,i.createElementVNode)("div",{class:"img",onClick:t=>J(e)},[(0,i.createElementVNode)("picture",{class:"picture",onMouseover:t=>P(t,e),onMouseleave:t[0]||(t[0]=e=>G(e))},[E,(0,i.createElementVNode)("img",{class:"el_img",src:`${e.data.coverUrl}?param=500y300`},null,8,w),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("svg",V,x,512)),[[d.F8,(0,u.unref)(O)===e.data.vid]])],40,_),(0,i.createElementVNode)("div",T,[(0,i.createVNode)(h,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g)])),_:1}),(0,i.createElementVNode)("span",null,(0,p.zw)((0,u.unref)(m.u)(e.data?.playTime||e.data?.playCount)),1)]),(0,i.createElementVNode)("div",j,[(0,i.createElementVNode)("span",null,(0,p.zw)((0,u.unref)(f.M)(e.data?.durationms||e.data?.duration)),1)])],8,N),(0,i.createElementVNode)("div",{class:"title",onClick:t=>J(e)},[(0,i.createVNode)(B,{class:"box-item",effect:"light","show-after":500,content:e.data.title||e.data.name,placement:"bottom"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("span",null,(0,p.zw)(e.data.title||e.data.name),1)])),_:2},1032,["content"])],8,S),(0,i.createElementVNode)("div",$,[e.data.creator?((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:0,onClick:t=>Q(e.data.creator)},(0,p.zw)(e.data.creator.nickname),9,q)):(0,i.createCommentVNode)("",!0),e.data.artists?((0,i.openBlock)(),(0,i.createElementBlock)("span",A,(0,p.zw)(e.data.artists[0].name),1)):(0,i.createCommentVNode)("",!0)])])])),_:2},1040)))),128))])),_:1})]),(0,u.unref)(y)?((0,i.openBlock)(),(0,i.createBlock)(v.Z,{key:0,class:"loading"})):(0,i.createCommentVNode)("",!0)],40,k)),[[z,U]]):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(Z,{right:50,bottom:110,"visibility-height":1e3,target:".el-scrollbar__wrap"})],64)}}},H=n(89);const I=(0,H.Z)(M,[["__scopeId","data-v-6b878b54"]]);var L=I},6773:function(e,t,n){n.d(t,{Z:function(){return y}});var o=n(8179),a=(n(6809),n(1015)),l=(n(8474),n(3396)),r=n(4870),s=n(7139),c=n(9654),i=(n(4639),n(65)),u=n(2483);const d={class:"tabs"},p=["onClick"],m={class:"tags_select"},f=["onClick"];var v={__name:"tags",props:{},setup(e,{emit:t}){const n=(0,i.useStore)(),v=(0,u.tv)(),g=(0,l.computed)((()=>n.state.keepAliveViews)),h=(0,l.computed)((()=>n.state.notAliveViews)),y=(0,r.ref)(),k=(0,r.ref)(!1),b=(0,l.computed)((()=>(y.value.innerHTML=n.state.video.tags.name,n.state.video.tags.name))),C=(0,r.ref)([]);n.dispatch("video/getCategoryList").then((e=>{C.value=e}));const N=(0,r.ref)([]);n.dispatch("video/getGroupList").then((e=>{N.value=e}));const _=()=>{k.value=!k.value},E=(0,r.ref)(),w=(e,t)=>{E.value=t,v.push({path:"/video/listVideo",query:{tag:t}}),n.commit("video/setTags",{id:t,name:e})},V=(e,t)=>{E.value=t,v.push({path:"/video/listVideo",query:{tag:t}}),n.commit("video/setTags",{id:t,name:e}),k.value=!1},B=e=>{E.value=0,b.value=e,k.value=!1,y.value.innerHTML=e};return(e,t)=>{const n=(0,l.resolveComponent)("ArrowRight"),i=a.gn,u=o.mi,v=(0,l.resolveComponent)("router-view");return(0,l.openBlock)(),(0,l.createElementBlock)("div",d,[(0,l.createVNode)(c.Z,{hotTags:(0,r.unref)(C),tags:(0,r.unref)(N),isCategory:(0,r.unref)(k),class:"padd"},{All:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{round:"",onClick:_},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",{ref_key:"totalMenuRef",ref:y},"全部歌单",512),(0,l.createVNode)(i,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(n)])),_:1})])),_:1})])),hotTabs:(0,l.withCtx)((({id:e,name:t})=>[(0,l.createElementVNode)("span",{class:(0,s.C_)({hot_tags:(0,r.unref)(b)===t})},[(0,l.createElementVNode)("span",{onClick:n=>w(t,e),class:"text"},(0,s.zw)(t),9,p)],2)])),tabsHeadre:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",{class:(0,s.C_)(["tag_all",{total_check:"全部视频"===(0,r.unref)(b)}]),onClick:t[0]||(t[0]=e=>B("全部视频"))},"全部视频",2)])),tags:(0,l.withCtx)((({id:e,name:t})=>[(0,l.createElementVNode)("div",m,[(0,l.createElementVNode)("span",{class:(0,s.C_)(["icona",{text_check:(0,r.unref)(b)===t}]),onClick:n=>V(t,e)},(0,s.zw)(t),11,f)])])),_:1},8,["hotTags","tags","isCategory"]),(0,l.createVNode)(v,null,{default:(0,l.withCtx)((({Component:t})=>[((0,l.openBlock)(),(0,l.createBlock)(l.KeepAlive,{include:(0,r.unref)(g),exclude:(0,r.unref)(h)},[((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(t),{key:e.$route.meta.title}))],1032,["include","exclude"]))])),_:1})])}}},g=n(89);const h=(0,g.Z)(v,[["__scopeId","data-v-9ed9206a"]]);var y=h},7488:function(e,t,n){n.d(t,{mR:function(){return _}});var o=n(3396),a=n(4870),l=n(9242),r=n(7139),s=n(6413),c=n(6367),i=n(1015),u=n(2748);const d={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},p={click:e=>e instanceof MouseEvent};var m=n(5989),f=n(6734);const v=e=>e**3,g=e=>e<.5?v(2*e)/2:1-v(2*(1-e))/2;var h=n(4620);const y=["onClick"],k={name:"ElBacktop"},b=(0,o.defineComponent)({...k,props:d,emits:p,setup(e,{emit:t}){const n=e,d="ElBacktop",p=(0,f.s)("backtop"),m=(0,a.shallowRef)(),v=(0,a.shallowRef)(),k=(0,a.ref)(!1),b=(0,o.computed)((()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}))),C=()=>{if(!m.value)return;const e=Date.now(),t=m.value.scrollTop,n=()=>{if(!m.value)return;const o=(Date.now()-e)/500;o<1?(m.value.scrollTop=t*(1-g(o)),requestAnimationFrame(n)):m.value.scrollTop=0};requestAnimationFrame(n)},N=()=>{m.value&&(k.value=m.value.scrollTop>=n.visibilityHeight)},_=e=>{C(),t("click",e)},E=(0,s.vA)(N,300);return(0,c.ORN)(v,"scroll",E),(0,o.onMounted)((()=>{var e;v.value=document,m.value=document.documentElement,n.target&&(m.value=null!=(e=document.querySelector(n.target))?e:void 0,m.value||(0,h._)(d,`target is not existed: ${n.target}`),v.value=m.value)})),(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(l.uT,{name:`${(0,a.unref)(p).namespace.value}-fade-in`},{default:(0,o.withCtx)((()=>[k.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,style:(0,r.j5)((0,a.unref)(b)),class:(0,r.C_)((0,a.unref)(p).b()),onClick:(0,l.iM)(_,["stop"])},[(0,o.renderSlot)(e.$slots,"default",{},(()=>[(0,o.createVNode)((0,a.unref)(i.gn),{class:(0,r.C_)((0,a.unref)(p).e("icon"))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,a.unref)(u.CaretTop))])),_:1},8,["class"])]))],14,y)):(0,o.createCommentVNode)("v-if",!0)])),_:3},8,["name"]))}});var C=(0,m.Z)(b,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]),N=n(9015);const _=(0,N.nz)(C)},9406:function(e,t,n){n(1758)},4902:function(e,t,n){n.d(t,{Dv:function(){return h}});var o=n(3396),a=n(7139),l=n(4870),r=n(5994),s=n(3071);const c=(0,r.o8)({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:(0,r.Cq)([Number,Object]),default:()=>(0,s.N)({})},sm:{type:(0,r.Cq)([Number,Object]),default:()=>(0,s.N)({})},md:{type:(0,r.Cq)([Number,Object]),default:()=>(0,s.N)({})},lg:{type:(0,r.Cq)([Number,Object]),default:()=>(0,s.N)({})},xl:{type:(0,r.Cq)([Number,Object]),default:()=>(0,s.N)({})}});var i=n(5989),u=n(7504),d=n(6734),p=n(6413);const m={name:"ElCol"},f=(0,o.defineComponent)({...m,props:c,setup(e){const t=e,{gutter:n}=(0,o.inject)(u.j,{gutter:(0,o.computed)((()=>0))}),r=(0,d.s)("col"),s=(0,o.computed)((()=>{const e={};return n.value&&(e.paddingLeft=e.paddingRight=n.value/2+"px"),e})),c=(0,o.computed)((()=>{const e=[],o=["span","offset","pull","push"];o.forEach((n=>{const o=t[n];(0,p.hj)(o)&&("span"===n?e.push(r.b(`${t[n]}`)):o>0&&e.push(r.b(`${n}-${t[n]}`)))}));const l=["xs","sm","md","lg","xl"];return l.forEach((n=>{(0,p.hj)(t[n])?e.push(r.b(`${n}-${t[n]}`)):(0,a.Kn)(t[n])&&Object.entries(t[n]).forEach((([t,o])=>{e.push("span"!==t?r.b(`${n}-${t}-${o}`):r.b(`${n}-${o}`))}))})),n.value&&e.push(r.is("guttered")),e}));return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.tag),{class:(0,a.C_)([(0,l.unref)(r).b(),(0,l.unref)(c)]),style:(0,a.j5)((0,l.unref)(s))},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"default")])),_:3},8,["class","style"]))}});var v=(0,i.Z)(f,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]),g=n(9015);const h=(0,g.nz)(v)},8839:function(e,t,n){n(1758)},3247:function(e,t,n){n.d(t,{n:function(){return b}});var o=n(3396),a=n(7139),l=n(1976),r=n(6142),s=n(4620),c=n(9304);const i="ElInfiniteScroll",u=50,d=200,p=0,m={delay:{type:Number,default:d},distance:{type:Number,default:p},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},f=(e,t)=>Object.entries(m).reduce(((n,[o,a])=>{var l,r;const{type:s,default:c}=a,i=e.getAttribute(`infinite-scroll-${o}`);let u=null!=(r=null!=(l=t[i])?l:i)?r:c;return u="false"!==u&&u,u=s(u),n[o]=Number.isNaN(u)?c:u,n}),{}),v=e=>{const{observer:t}=e[i];t&&(t.disconnect(),delete e[i].observer)},g=(e,t)=>{const{container:n,containerEl:o,instance:a,observer:l,lastScrollTop:s}=e[i],{disabled:c,distance:u}=f(e,a),{clientHeight:d,scrollHeight:p,scrollTop:m}=o,v=m-s;if(e[i].lastScrollTop=m,l||c||v<0)return;let g=!1;if(n===e)g=p-(d+m)<=u;else{const{clientTop:t,scrollHeight:n}=e,a=(0,r.yP)(e,o);g=m+d>=a+t+n-u}g&&t.call(a)};function h(e,t){const{containerEl:n,instance:o}=e[i],{disabled:a}=f(e,o);a||0===n.clientHeight||(n.scrollHeight<=n.clientHeight?t.call(o):v(e))}const y={async mounted(e,t){const{instance:n,value:r}=t;(0,a.mf)(r)||(0,s._)(i,"'v-infinite-scroll' binding value must be a function"),await(0,o.nextTick)();const{delay:d,immediate:p}=f(e,n),m=(0,c.JX)(e,!0),v=m===window?document.documentElement:m,y=(0,l.Z)(g.bind(null,e,r),d);if(m){if(e[i]={instance:n,container:m,containerEl:v,delay:d,cb:r,onScroll:y,lastScrollTop:v.scrollTop},p){const t=new MutationObserver((0,l.Z)(h.bind(null,e,r),u));e[i].observer=t,t.observe(e,{childList:!0,subtree:!0}),h(e,r)}m.addEventListener("scroll",y)}},unmounted(e){const{container:t,onScroll:n}=e[i];null==t||t.removeEventListener("scroll",n),v(e)},async updated(e){e[i]||await(0,o.nextTick)();const{containerEl:t,cb:n,observer:a}=e[i];t.clientHeight&&a&&h(e,n)}},k=y;k.install=e=>{e.directive("InfiniteScroll",k)};const b=k},6588:function(e,t,n){n(1758)},9776:function(e,t,n){n.d(t,{dq:function(){return h}});var o=n(3396),a=n(7139),l=n(4870),r=n(5994);const s=["start","center","end","space-around","space-between","space-evenly"],c=["top","middle","bottom"],i=(0,r.o8)({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:s,default:"start"},align:{type:String,values:c,default:"top"}});var u=n(5989),d=n(6734),p=n(7504);const m={name:"ElRow"},f=(0,o.defineComponent)({...m,props:i,setup(e){const t=e,n=(0,d.s)("row"),r=(0,o.computed)((()=>t.gutter));(0,o.provide)(p.j,{gutter:r});const s=(0,o.computed)((()=>{const e={};return t.gutter?(e.marginRight=e.marginLeft=`-${t.gutter/2}px`,e):e}));return(e,r)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.tag),{class:(0,a.C_)([(0,l.unref)(n).b(),(0,l.unref)(n).is(`justify-${t.justify}`,"start"!==e.justify),(0,l.unref)(n).is(`align-${t.align}`,"top"!==e.align)]),style:(0,a.j5)((0,l.unref)(s))},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"default")])),_:3},8,["class","style"]))}});var v=(0,u.Z)(f,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]),g=n(9015);const h=(0,g.nz)(v)},6885:function(e,t,n){n(1758)},7504:function(e,t,n){n.d(t,{j:function(){return o}});const o=Symbol("rowContextKey")}}]);
//# sourceMappingURL=213.9392a354.js.map