"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[958],{5735:function(e,n,i){i.r(n),i.d(n,{default:function(){return N}});var t=i(970),a=(i(451),i(3396)),l=i(4870),r=i(3247),c=(i(6588),i(7139)),o=i(9242);function s(){const e=(0,l.ref)({"语种":[{area:"-1",name:"全部"},{area:"7",name:"华语"},{area:"96",name:"欧美"},{area:"8",name:"日本"},{area:"16",name:"韩国"},{area:"0",name:"其他"}],"分类":[{type:"-1",name:"全部"},{type:"1",name:"男歌手"},{type:"2",name:"女歌手"},{type:"3",name:"乐队"}],"筛选":[{initial:"-1",name:"热门"},{initial:"a",name:"A"},{initial:"b",name:"B"},{initial:"c",name:"C"},{initial:"d",name:"D"},{initial:"e",name:"E"},{initial:"f",name:"F"},{initial:"g",name:"G"},{initial:"h",name:"H"},{initial:"i",name:"I"},{initial:"j",name:"J"},{initial:"k",name:"K"},{initial:"l",name:"L"},{initial:"m",name:"M"},{initial:"n",name:"N"},{initial:"o",name:"O"},{initial:"p",name:"P"},{initial:"q",name:"Q"},{initial:"r",name:"R"},{initial:"s",name:"S"},{initial:"t",name:"T"},{initial:"u",name:"U"},{initial:"v",name:"V"},{initial:"w",name:"W"},{initial:"x",name:"X"},{initial:"y",name:"Y"},{initial:"z",name:"Z"},{initial:"0",name:"#"}]});return e}var m=i(65),u=i(5399);const d=e=>((0,a.pushScopeId)("data-v-7295a87c"),e=e(),(0,a.popScopeId)(),e),f=["infinite-scroll-disabled"],p={class:"singr_name"},v={class:"singer_check"},g=["onClick"],h=d((()=>(0,a.createElementVNode)("p",{style:{"text-align":"center"}},"Loading...",-1))),y={class:"load"};var k={__name:"singerHome",props:{},setup(e,{emit:n}){const{reactive:t,ref:d}=i(4870),k=(0,a.defineAsyncComponent)((()=>i.e(3).then(i.bind(i,5003)))),b=(0,m.useStore)(),E=d({area:-1,type:-1,initial:-1,offset:0,limit:30});b.dispatch("recommend/singer/getSingerInfo",E.value);const _=(0,a.computed)((()=>b.state.recommend.singer.singerInfo)),B=s(),w=d({area:"-1",name:"全部"}),S=d({type:"-1",name:"全部"}),N=d({initial:"-1",name:"热门"}),C=(e,n)=>{if(6===Object.keys(e).length)for(const i in e)e[i].area===n.area&&(w.value=n);if(4===Object.keys(e).length)for(const i in e)e[i].type===n.type&&(S.value=n);if(28===Object.keys(e).length)for(const i in e)e[i].initial===n.initial&&(N.value=n);console.log({area:w.value.area,type:S.value.type,initial:N.value.initial}),E.value={area:w.value.area,type:S.value.type,initial:N.value.initial,offset:0,limit:30},b.dispatch("recommend/singer/getSingerInfo",E.value)},I=d(!1),V=d(!1),H=d(!1),L=()=>{console.log("加载更多"),V.value=!0,E.value.offset+=30,b.dispatch("recommend/singer/getscrollInfo",E.value).then((e=>{0===e.length&&(I.value=!0,H.value=!0,V.value=!1),e.forEach((e=>{b.state.recommend.singer.singerInfo.push(e)}))}))};return(e,n)=>{const i=r.n;return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"singer_home","infinite-scroll-distance":300,"infinite-scroll-delay":1e3,"infinite-scroll-disabled":(0,l.unref)(I),"infinite-scroll-immediate":""},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,l.unref)(B),((e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"singr_search",key:e},[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("span",null,(0,c.zw)(n)+":",1)]),(0,a.createElementVNode)("div",v,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e,(n=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:n,class:"singer_area",onClick:i=>C(e,n)},[(0,a.createElementVNode)("span",{class:(0,c.C_)(["area_text",{areaCheck:n.area==(0,l.unref)(w).area,areaCheck1:n.type==(0,l.unref)(S).type,areaCheck2:n.initial==(0,l.unref)(N).initial}])},(0,c.zw)(n.name),3)],8,g)))),128))])])))),128)),((0,a.openBlock)(),(0,a.createBlock)(a.Suspense,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,l.unref)(k),{singerList:(0,l.unref)(_)},null,8,["singerList"])])),fallback:(0,a.withCtx)((()=>[h])),_:1})),(0,a.withDirectives)((0,a.createVNode)(u.Z,{class:"loading"},null,512),[[o.F8,(0,l.unref)(V)]]),(0,a.withDirectives)((0,a.createElementVNode)("p",y,"已经加载到最底部了...",512),[[o.F8,(0,l.unref)(H)]])],8,f)),[[i,L]])}}},b=i(89);const E=(0,b.Z)(k,[["__scopeId","data-v-7295a87c"]]);var _=E,B=i(6237),w={__name:"singer",props:{},setup(e,{emit:n}){const i=(0,l.ref)(),r=(0,B.f)(i);return(e,n)=>{const c=t.Mr;return(0,a.openBlock)(),(0,a.createBlock)(c,{onScroll:(0,l.unref)(r),class:"singer",ref_key:"elRef",ref:i},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{class:"lessen"})])),_:1},8,["onScroll"])}}};const S=(0,b.Z)(w,[["__scopeId","data-v-326118bf"]]);var N=S},3247:function(e,n,i){i.d(n,{n:function(){return b}});var t=i(3396),a=i(7139),l=i(1976),r=i(6142),c=i(4620),o=i(9304);const s="ElInfiniteScroll",m=50,u=200,d=0,f={delay:{type:Number,default:u},distance:{type:Number,default:d},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},p=(e,n)=>Object.entries(f).reduce(((i,[t,a])=>{var l,r;const{type:c,default:o}=a,s=e.getAttribute(`infinite-scroll-${t}`);let m=null!=(r=null!=(l=n[s])?l:s)?r:o;return m="false"!==m&&m,m=c(m),i[t]=Number.isNaN(m)?o:m,i}),{}),v=e=>{const{observer:n}=e[s];n&&(n.disconnect(),delete e[s].observer)},g=(e,n)=>{const{container:i,containerEl:t,instance:a,observer:l,lastScrollTop:c}=e[s],{disabled:o,distance:m}=p(e,a),{clientHeight:u,scrollHeight:d,scrollTop:f}=t,v=f-c;if(e[s].lastScrollTop=f,l||o||v<0)return;let g=!1;if(i===e)g=d-(u+f)<=m;else{const{clientTop:n,scrollHeight:i}=e,a=(0,r.yP)(e,t);g=f+u>=a+n+i-m}g&&n.call(a)};function h(e,n){const{containerEl:i,instance:t}=e[s],{disabled:a}=p(e,t);a||0===i.clientHeight||(i.scrollHeight<=i.clientHeight?n.call(t):v(e))}const y={async mounted(e,n){const{instance:i,value:r}=n;(0,a.mf)(r)||(0,c._)(s,"'v-infinite-scroll' binding value must be a function"),await(0,t.nextTick)();const{delay:u,immediate:d}=p(e,i),f=(0,o.JX)(e,!0),v=f===window?document.documentElement:f,y=(0,l.Z)(g.bind(null,e,r),u);if(f){if(e[s]={instance:i,container:f,containerEl:v,delay:u,cb:r,onScroll:y,lastScrollTop:v.scrollTop},d){const n=new MutationObserver((0,l.Z)(h.bind(null,e,r),m));e[s].observer=n,n.observe(e,{childList:!0,subtree:!0}),h(e,r)}f.addEventListener("scroll",y)}},unmounted(e){const{container:n,onScroll:i}=e[s];null==n||n.removeEventListener("scroll",i),v(e)},async updated(e){e[s]||await(0,t.nextTick)();const{containerEl:n,cb:i,observer:a}=e[s];n.clientHeight&&a&&h(e,i)}},k=y;k.install=e=>{e.directive("InfiniteScroll",k)};const b=k},6588:function(e,n,i){i(1758)}}]);
//# sourceMappingURL=singer.618af170.js.map