"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[426,722],{3259:function(e,t,l){l.r(t),l.d(t,{default:function(){return ye}});var o=l(7488),a=(l(9406),l(1015)),n=(l(8474),l(3396)),r=l(4870),c=l(9623),i=(l(4566),l(7139)),d=l(3741),s=l(6757),m=l(2483),u=l(65);const v=e=>((0,n.pushScopeId)("data-v-df84d0ea"),e=e(),(0,n.popScopeId)(),e),p=v((()=>(0,n.createElementVNode)("h2",{class:"related"},"相关推荐",-1))),f={key:0,class:"recommend"},V={class:"related_categ"},k=["onClick"],N=["src"],g={class:"playCount"},h={class:"video_durationms"},E={class:"item_text"},C=["onClick"],y={class:"author"},_=["onClick"],w={key:1,class:"recommend"},B={class:"related_categ"},z=["onClick"],I=["src"],x={class:"playCount"},b={class:"video_durationms"},q={class:"item_text"},S=["onClick"],P={class:"author"},U=["onClick"];var T={__name:"relatedVideo",props:{},setup(e){const t=(0,u.useStore)(),l=(0,m.yj)(),o=(0,m.tv)(),v=(0,r.ref)([]),T=(0,r.ref)([]),D=e=>{t.dispatch("video/getRelatedMv",e).then((e=>{console.log(e),T.value=e.mvs}))},F=e=>{t.dispatch("video/getRelatedVideo",e).then((e=>{console.log(e),v.value=e.data}))};(0,n.watch)((()=>l.query),(e=>{e.vid?F(e.vid):e.mvId&&D(e.mvId)}),{immediate:!0});const R=e=>{console.log(e),l.query.vid?o.push({path:"/mainVideo",query:{vid:e.vid}}):(window.sessionStorage.setItem("mvid",e.id),o.push({path:"/mainVideo",query:{mvId:e.id}}))},Z=e=>{if(console.log(e),!l.query.mvId)return console.log("object--------------"),void o.push({path:"/profilePage",query:{id:e[0].userId}});o.push({path:"/singerDetailPage",query:{id:e}})};return(e,t)=>{const l=(0,n.resolveComponent)("VideoPlay"),o=a.gn,m=c.Q0;return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[p,(0,r.unref)(v)?((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,r.unref)(v),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e,class:"related_item"},[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("div",{class:"img",onClick:t=>R(e)},[(0,n.createElementVNode)("img",{class:"el_img",src:`${e.coverUrl}?param=500y300`},null,8,N),(0,n.createElementVNode)("div",g,[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1}),(0,n.createElementVNode)("span",null,(0,i.zw)((0,r.unref)(d.u)(e.playTime)),1)]),(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("span",null,(0,i.zw)((0,r.unref)(s.M)(e.durationms)),1)])],8,k),(0,n.createElementVNode)("div",E,[(0,n.createElementVNode)("div",{class:"title",onClick:t=>R(e)},[(0,n.createVNode)(m,{class:"box_item",effect:"light","show-after":500,content:e.title,placement:"bottom"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",null,(0,i.zw)(e.title),1)])),_:2},1032,["content"])],8,C),(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("span",{onClick:t=>Z(e.creator)},(0,i.zw)(e.creator[0].userName),9,_)])])])])))),128))])):(0,n.createCommentVNode)("",!0),(0,r.unref)(T)?((0,n.openBlock)(),(0,n.createElementBlock)("div",w,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,r.unref)(T),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e,class:"related_item"},[(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("div",{class:"img",onClick:t=>R(e)},[(0,n.createElementVNode)("img",{class:"el_img",src:`${e.cover}?param=500y300`},null,8,I),(0,n.createElementVNode)("div",x,[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1}),(0,n.createElementVNode)("span",null,(0,i.zw)((0,r.unref)(d.u)(e.playCount)),1)]),(0,n.createElementVNode)("div",b,[(0,n.createElementVNode)("span",null,(0,i.zw)((0,r.unref)(s.M)(e.duration)),1)])],8,z),(0,n.createElementVNode)("div",q,[(0,n.createElementVNode)("div",{class:"title",onClick:t=>R(e)},[(0,n.createVNode)(m,{class:"box_item",effect:"light","show-after":500,content:e.name,placement:"bottom"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",null,(0,i.zw)(e.name),1)])),_:2},1032,["content"])],8,S),(0,n.createElementVNode)("div",P,[(0,n.createElementVNode)("span",{onClick:t=>Z(e.artistId)},(0,i.zw)(e.artistName),9,U)])])])])))),128))])):(0,n.createCommentVNode)("",!0)])}}},D=l(89);const F=(0,D.Z)(T,[["__scopeId","data-v-df84d0ea"]]);var R=F,Z=(l(4639),l(8179)),j=(l(6809),l(1426));const M=e=>((0,n.pushScopeId)("data-v-2ae9e208"),e=e(),(0,n.popScopeId)(),e),L={key:0,class:"detail_item"},G={class:"creator"},O=["src"],A=M((()=>(0,n.createElementVNode)("span",null," + 关注 ",-1))),$={class:"title"},Q={class:"publish_playCount"},H={class:"videoGroup"},J=["onClick"],K={key:1,class:"detail_item"},W={class:"creator"},X=["src"],Y={class:"title"},ee={class:"publish_playCount"},te={class:"videoGroup"},le=["onClick"];var oe={__name:"detailVideo",emits:["onVideoUrl","onVideoDetail"],setup(e,{emit:t}){const l=(0,u.useStore)(),o=(0,m.yj)(),a=(0,m.tv)(),c=(0,r.ref)(),s=(0,r.ref)(),v=(0,r.ref)(),p=(0,r.ref)(),f=e=>{l.dispatch("video/getVideoDetail",e).then((e=>{c.value=e.data,t("onVideoDetail",c.value)})),l.dispatch("video/getVideoUrl",e).then((e=>{s.value=e.urls[0]?.url,console.log(s.value),t("onVideoUrl",s.value)}))},V=e=>{l.dispatch("video/getMvData",e).then((e=>{v.value=e.data,t("onVideoDetail",v.value)})),l.dispatch("video/getMvUrl",e).then((e=>{p.value=e.data.url,t("onVideoUrl",p.value)}))};(0,n.watch)((()=>o.query),(e=>{e.vid?f(e.vid):e.mvId&&V(e.mvId)}),{immediate:!0});const k=e=>{console.log(e),l.commit("video/setTags",{id:e.id,name:e.name}),a.push({path:"/video/listVideo",query:{tag:e.id}})},N=e=>{if(console.log(e),!o.query.mvId)return console.log("object--------------"),void a.push({path:"/profilePage",query:{id:e.creator.userId}});a.push({path:"/singerDetailPage",query:{id:e.artistId}})};return(e,t)=>{const l=Z.mi;return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,r.unref)(c)?((0,n.openBlock)(),(0,n.createElementBlock)("div",L,[(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("img",{src:(0,r.unref)(c).creator.avatarUrl,alt:"",onClick:t[0]||(t[0]=e=>N((0,r.unref)(c)))},null,8,O),(0,n.createElementVNode)("span",{class:"author_name",onClick:t[1]||(t[1]=e=>N((0,r.unref)(c)))},(0,i.zw)((0,r.unref)(c).creator.nickname),1)]),(0,n.createVNode)(l,{type:"primary",round:"",class:"foll"},{default:(0,n.withCtx)((()=>[A])),_:1})]),(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("h2",null,(0,i.zw)((0,r.unref)(c).title),1)]),(0,n.createElementVNode)("div",Q,[(0,n.createElementVNode)("span",null,"发布时间: "+(0,i.zw)((0,r.unref)(j.U)((0,r.unref)(c).publishTime)),1),(0,n.createElementVNode)("span",null,"播放量："+(0,i.zw)((0,r.unref)(d.u)((0,r.unref)(c).playTime)),1)]),(0,n.createElementVNode)("div",H,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,r.unref)(c).videoGroup,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:e,class:"group_item",onClick:t=>k(e)},(0,i.zw)(e.name),9,J)))),128))])])):(0,n.createCommentVNode)("",!0),(0,r.unref)(v)?((0,n.openBlock)(),(0,n.createElementBlock)("div",K,[(0,n.createElementVNode)("div",W,[(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("img",{src:(0,r.unref)(v).cover,alt:"",onClick:t[2]||(t[2]=e=>N((0,r.unref)(v)))},null,8,X),(0,n.createElementVNode)("span",{class:"author_name",onClick:t[3]||(t[3]=e=>N((0,r.unref)(v)))},(0,i.zw)((0,r.unref)(v).artistName),1)])]),(0,n.createElementVNode)("div",Y,[(0,n.createElementVNode)("h2",null,(0,i.zw)((0,r.unref)(v).name),1)]),(0,n.createElementVNode)("div",ee,[(0,n.createElementVNode)("span",null,"发布时间: "+(0,i.zw)((0,r.unref)(v).publishTime),1),(0,n.createElementVNode)("span",null,"播放量："+(0,i.zw)((0,r.unref)(d.u)((0,r.unref)(v).playCount)),1)]),(0,n.createElementVNode)("div",te,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,r.unref)(v).videoGroup,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:e,class:"group_item",onClick:t=>k(e)},(0,i.zw)(e.name),9,le)))),128))])])):(0,n.createCommentVNode)("",!0)],64)}}};const ae=(0,D.Z)(oe,[["__scopeId","data-v-2ae9e208"]]);var ne=ae,re=l(6097),ce=(l(2760),l(877)),ie=(l(9395),l(9566)),de=l(4007);const se={class:"comment_title"},me={class:"new_comment"},ue={class:"comment_title"};var ve={__name:"comment",props:{},emits:["onClickPlgination"],setup(e,{emit:t}){const l=(0,m.yj)(),o=(0,u.useStore)(),a=(0,r.ref)({limit:30,offset:1}),c=(0,r.ref)(!0),d=(0,r.ref)(),s=(0,r.ref)(!1),v=(0,r.ref)(),p=async(e,t)=>{d.value=await o.dispatch("video/getMvComment",{id:e,limit:a.value.limit,offset:t*a.value.limit}),d.value?s.value=!1:c.value=!1},f=async(e,t)=>{d.value=await o.dispatch("video/getVoideComment",{id:e,limit:a.value.limit,offset:t*a.value.limit}),d.value?s.value=!1:c.value=!1};return(0,n.watch)((()=>l.query),(e=>{e.vid?f(e.vid,0):e.mvId&&p(e.mvId,0)}),{immediate:!0}),(0,n.watch)((()=>a.value.offset),(e=>{s.value=!0,t("onClickPlgination",v.value.offsetTop),l.query.vid?f(l.query.vid,e-1):p(l.query.id,e-1)})),(e,t)=>{const l=ce.vk,o=re.R;return(0,r.unref)(c)&&(0,r.unref)(d)?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"comment",ref_key:"agocomment",ref:v},[1==(0,r.unref)(a).offset?((0,n.openBlock)(),(0,n.createBlock)(ie.Z,{key:0,comment:(0,r.unref)(d).hotComments,class:"hot_comments"},(0,n.createSlots)({_:2},[(0,r.unref)(d).hotComments.length?{name:"comment-title",fn:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",se,"精彩评论("+(0,i.zw)((0,r.unref)(d).hotComments.length)+")",1)])),key:"0"}:void 0]),1032,["comment"])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",me,[(0,n.createElementVNode)("span",ue,"最新评论("+(0,i.zw)((0,r.unref)(d).total)+")",1),(0,n.createVNode)(l,{loading:(0,r.unref)(s),count:10},{template:(0,n.withCtx)((()=>[(0,n.createVNode)(de.Z)])),default:(0,n.withCtx)((()=>[(0,n.createVNode)(ie.Z,{comment:(0,r.unref)(d).comments},null,8,["comment"])])),_:1},8,["loading"]),(0,n.createVNode)(o,{background:"",layout:"prev, pager, next",currentPage:(0,r.unref)(a).offset,"onUpdate:currentPage":t[0]||(t[0]=e=>(0,r.unref)(a).offset=e),"page-size":(0,r.unref)(a).limit,"onUpdate:page-size":t[1]||(t[1]=e=>(0,r.unref)(a).limit=e),total:(0,r.unref)(d).total,class:"pagination"},null,8,["currentPage","page-size","total"])])],512)):(0,n.createCommentVNode)("",!0)}}};const pe=(0,D.Z)(ve,[["__scopeId","data-v-253772d3"]]);var fe=pe;const Ve={class:"voide_left"},ke={class:"detail"},Ne={class:"detail_item"},ge={class:"comment"},he={class:"recommend"};var Ee={__name:"mainVideo",props:{},setup(e,{emit:t}){(0,u.useStore)(),(0,m.yj)();const l=(0,m.tv)(),c=(0,r.ref)(),i=(0,r.ref)(),d=e=>{console.log(e),i.value.scrollTop=e-60},s=e=>{c.value=e.target.scrollTop};(0,n.onActivated)((()=>{console.log("视频界面缓存"),console.log(c.value),i.value.scrollTop=c.value})),(0,n.onDeactivated)((()=>{console.log(c.value)}));const v=(0,r.ref)(),p=(0,r.ref)(),f=e=>{v.value=e},V=e=>{p.value=e},k=(0,r.reactive)({width:"650px",height:"350px",color:"#409eff",title:"",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.5,control:!0,controlBtns:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]}),N=()=>{l.back(-1)};return(e,t)=>{const l=(0,n.resolveComponent)("ArrowLeftBold"),c=a.gn,m=(0,n.resolveComponent)("vue3-video-play"),u=o.mR;return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createElementVNode)("div",{class:"lessen",ref_key:"lessRef",ref:i,onScroll:s},[(0,n.createElementVNode)("div",Ve,[(0,n.createElementVNode)("h2",ke,[(0,n.createVNode)(c,{class:"exit",onClick:N},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1}),(0,n.createTextVNode)(" 视频详情 ")]),(0,r.unref)(v)?((0,n.openBlock)(),(0,n.createBlock)(m,(0,n.mergeProps)({key:0},(0,r.unref)(k),{poster:(0,r.unref)(v).coverUrl||(0,r.unref)(v).cover,src:(0,r.unref)(p)}),null,16,["poster","src"])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",Ne,[(0,n.createVNode)(ne,{onOnVideoDetail:f,onOnVideoUrl:V})]),(0,n.createElementVNode)("div",ge,[(0,n.createVNode)(fe,{onOnClickPlgination:d})])]),(0,n.createElementVNode)("div",he,[(0,n.createVNode)(R)])],544),(0,n.createVNode)(u,{right:50,bottom:110,"visibility-height":1e3,target:".lessen"})],64)}}};const Ce=(0,D.Z)(Ee,[["__scopeId","data-v-0f88c63c"]]);var ye=Ce}}]);
//# sourceMappingURL=426.388c84c3.js.map