{"version":3,"file":"js/recommend.ecb52fd6.js","mappings":"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","sources":["webpack://music/./src/views/podcast/VirtualList.vue","webpack://music/./src/views/podcast/VirtualList.vue?ed04","webpack://music/./src/views/podcast/podcast.vue","webpack://music/./src/views/podcast/podcast.vue?5118"],"sourcesContent":["import { unref as _unref, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { ref } from \"@vue/reactivity\";\nimport { computed, onMounted } from \"@vue/runtime-core\";\nexport default {\n  __name: 'VirtualList',\n  props: {\n    // 所有列表数据\n    listData: {\n      type: Array,\n      default: []\n    },\n    //每项高度\n    itemSize: {\n      type: Number,\n      default: 200\n    },\n    itemSize: {\n      type: Object,\n      default: () => {\n        return {\n          fontSize: \"13px\",\n          height: \"50px\"\n        };\n      }\n    }\n  },\n\n  setup(__props) {\n    const props = __props; // 是否显示表头\n\n    const isHeader = ref(true);\n    const list = ref(); //可视区域高度\n\n    const screenHeight = ref(0); //偏移量\n\n    const startOffset = ref(0); //起始索引\n\n    const start = ref(0); //结束索引\n\n    const end = ref(null); //列表总高度\n\n    const listHeight = computed(() => props.listData.length * parseInt(props.itemSize.height.match(/\\d+/g)[0])); //可显示的列表项数\n\n    const visibleCount = computed(() => Math.ceil(screenHeight.value / parseInt(props.itemSize.height.match(/\\d+/g)[0]))); //获取真实显示列表数据\n\n    const visibleData = computed(() => props.listData.slice(start.value, Math.min(end.value + 1, props.listData.length))); //   偏移量对应的style\n\n    const getTransform = computed(() => `translate3d(0,${startOffset.value}px,0)`);\n    onMounted(() => {\n      screenHeight.value = list.value.clientHeight;\n      console.log(list.value.clientHeight);\n      end.value = start.value + visibleCount.value;\n      console.log(visibleCount.value);\n      console.log(start.value);\n      console.log(end.value);\n      console.log(visibleData.value);\n    });\n\n    const scrollEvent = e => {\n      console.log(screenHeight.value);\n\n      if (e.target.scrollTop > screenHeight.value) {\n        isHeader.value = false;\n      } else {\n        isHeader.value = true;\n      } //当前滚动位置\n\n\n      let scrollTop = list.value.scrollTop; //此时的开始索引\n\n      start.value = Math.floor(scrollTop / parseInt(props.itemSize.height.match(/\\d+/g)[0])); //此时的结束索引\n\n      end.value = start.value + visibleCount.value; //此时的偏移量\n\n      startOffset.value = scrollTop - scrollTop % parseInt(props.itemSize.height.match(/\\d+/g)[0]);\n    };\n\n    return (_ctx, _cache) => {\n      const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n      const _component_el_table = _resolveComponent(\"el-table\");\n\n      return _openBlock(), _createElementBlock(\"div\", {\n        ref_key: \"list\",\n        ref: list,\n        class: \"infinite-list-container\",\n        onScroll: _cache[0] || (_cache[0] = $event => scrollEvent($event))\n      }, [_createElementVNode(\"div\", {\n        class: \"infinite-list-phantom\",\n        style: _normalizeStyle({\n          height: _unref(listHeight) + 'px'\n        })\n      }, null, 4), _createVNode(_component_el_table, {\n        class: \"infinite-list\",\n        data: _unref(visibleData),\n        \"row-style\": __props.itemSize,\n        style: _normalizeStyle({\n          transform: _unref(getTransform)\n        }),\n        \"show-header\": _unref(isHeader)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_table_column, {\n          prop: \"id\",\n          label: \"id\",\n          width: \"180\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"value\",\n          label: \"Date\"\n        })]),\n        _: 1\n      }, 8, [\"data\", \"row-style\", \"style\", \"show-header\"])], 544);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./VirtualList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./VirtualList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./VirtualList.vue?vue&type=style&index=0&id=4d6b87b0&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网易云\\\\music\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4d6b87b0\"]])\n\nexport default __exports__","import { unref as _unref, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-06c91c74\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"podcast\"\n};\nimport VirtualList from \"./VirtualList.vue\";\nimport { onActivated, onMounted, ref } from \"@vue/runtime-core\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'podcast',\n  props: {},\n\n  setup(__props, {\n    emit\n  }) {\n    const props = __props;\n    const router = useRouter();\n    const count = ref([]);\n    onMounted(() => {\n      for (let i = 0; i < 1000; i++) {\n        count.value.push({\n          id: i,\n          value: String(Date.now())\n        });\n      }\n\n      console.log(\"onMounted\");\n    });\n    onActivated(() => {\n      console.log(\"缓存\");\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(VirtualList, {\n        listData: _unref(count),\n        itemSize: {\n          height: '100px'\n        }\n      }, null, 8, [\"listData\"])]);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./podcast.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./podcast.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./podcast.vue?vue&type=style&index=0&id=06c91c74&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网易云\\\\music\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-06c91c74\"]])\n\nexport default __exports__"],"names":["__name","props","listData","type","Array","default","itemSize","Number","Object","fontSize","height","setup","__props","isHeader","ref","list","screenHeight","startOffset","start","end","listHeight","computed","length","parseInt","match","visibleCount","Math","ceil","value","visibleData","slice","min","getTransform","onMounted","clientHeight","console","log","scrollEvent","e","target","scrollTop","floor","_ctx","_cache","_component_el_table_column","_component_el_table","ref_key","class","onScroll","$event","style","data","transform","prop","label","width","_","__exports__","_hoisted_1","emit","count","i","push","id","String","Date","now","onActivated","VirtualList"],"sourceRoot":""}