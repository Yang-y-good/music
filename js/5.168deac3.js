"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[5,93],{3741:function(e,t,l){function o(e){const t=Array.from(String(e));return 6===t.length?t.join("").slice(0,2)+"万":7===t.length?t.join("").slice(0,3)+"万":8===t.length?t.join("").slice(0,4)+"万":9===t.length?t.join("").slice(0,1)+"亿":10===t.length?t.join("").slice(0,2)+"亿":11===t.length?t.join("").slice(0,3)+"亿":e}l.d(t,{u:function(){return o}})},5356:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ce}});var o=l(7488),n=(l(9406),l(1015)),a=(l(8474),l(3396)),c=l(7139),r=l(4870),i=l(9623),s=(l(4566),l(3741)),d=l(6757),m=l(2483),u=l(65);const v=e=>((0,a.pushScopeId)("data-v-df84d0ea"),e=e(),(0,a.popScopeId)(),e),p=v((()=>(0,a.createElementVNode)("h2",{class:"related"},"相关推荐",-1))),f={key:0,class:"recommend"},V={class:"related_categ"},k=["onClick"],N=["src"],g={class:"playCount"},h={class:"video_durationms"},E={class:"item_text"},y=["onClick"],C={class:"author"},_=["onClick"],w={key:1,class:"recommend"},B={class:"related_categ"},z=["onClick"],I=["src"],q={class:"playCount"},x={class:"video_durationms"},P={class:"item_text"},b=["onClick"],S={class:"author"},U=["onClick"];var j={__name:"relatedVideo",props:{},setup(e){const t=(0,u.useStore)(),l=(0,m.yj)(),o=(0,m.tv)(),v=(0,r.ref)([]),j=(0,r.ref)([]),M=e=>{t.dispatch("video/getRelatedMv",e).then((e=>{console.log(e),j.value=e.mvs}))},T=e=>{t.dispatch("video/getRelatedVideo",e).then((e=>{console.log(e),v.value=e.data}))};(0,a.watch)((()=>l.query),(e=>{e.vid?T(e.vid):e.mvId&&M(e.mvId)}),{immediate:!0});const D=e=>{console.log(e),l.query.vid?o.push({path:"/mainVideo",query:{vid:e.vid}}):(window.sessionStorage.setItem("mvid",e.id),o.push({path:"/mainVideo",query:{mvId:e.id}}))},F=e=>{if(console.log(e),!l.query.mvId)return console.log("object--------------"),void o.push({path:"/profilePage",query:{id:e[0].userId}});o.push({path:"/singerDetailPage",query:{id:e}})};return(e,t)=>{const l=(0,a.resolveComponent)("VideoPlay"),o=n.gn,m=i.Q0;return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[p,(0,r.unref)(v)?((0,a.openBlock)(),(0,a.createElementBlock)("div",f,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,r.unref)(v),(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"related_item"},[(0,a.createElementVNode)("div",V,[(0,a.createElementVNode)("div",{class:"img",onClick:t=>D(e)},[(0,a.createElementVNode)("img",{class:"el_img",src:`${e.coverUrl}?param=500y300`},null,8,N),(0,a.createElementVNode)("div",g,[(0,a.createVNode)(o,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l)])),_:1}),(0,a.createElementVNode)("span",null,(0,c.zw)((0,r.unref)(s.u)(e.playTime)),1)]),(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("span",null,(0,c.zw)((0,r.unref)(d.M)(e.durationms)),1)])],8,k),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",{class:"title",onClick:t=>D(e)},[(0,a.createVNode)(m,{class:"box_item",effect:"light","show-after":500,content:e.title,placement:"bottom"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",null,(0,c.zw)(e.title),1)])),_:2},1032,["content"])],8,y),(0,a.createElementVNode)("div",C,[(0,a.createElementVNode)("span",{onClick:t=>F(e.creator)},(0,c.zw)(e.creator[0].userName),9,_)])])])])))),128))])):(0,a.createCommentVNode)("",!0),(0,r.unref)(j)?((0,a.openBlock)(),(0,a.createElementBlock)("div",w,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,r.unref)(j),(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"related_item"},[(0,a.createElementVNode)("div",B,[(0,a.createElementVNode)("div",{class:"img",onClick:t=>D(e)},[(0,a.createElementVNode)("img",{class:"el_img",src:`${e.cover}?param=500y300`},null,8,I),(0,a.createElementVNode)("div",q,[(0,a.createVNode)(o,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l)])),_:1}),(0,a.createElementVNode)("span",null,(0,c.zw)((0,r.unref)(s.u)(e.playCount)),1)]),(0,a.createElementVNode)("div",x,[(0,a.createElementVNode)("span",null,(0,c.zw)((0,r.unref)(d.M)(e.duration)),1)])],8,z),(0,a.createElementVNode)("div",P,[(0,a.createElementVNode)("div",{class:"title",onClick:t=>D(e)},[(0,a.createVNode)(m,{class:"box_item",effect:"light","show-after":500,content:e.name,placement:"bottom"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",null,(0,c.zw)(e.name),1)])),_:2},1032,["content"])],8,b),(0,a.createElementVNode)("div",S,[(0,a.createElementVNode)("span",{onClick:t=>F(e.artistId)},(0,c.zw)(e.artistName),9,U)])])])])))),128))])):(0,a.createCommentVNode)("",!0)])}}},M=l(89);const T=(0,M.Z)(j,[["__scopeId","data-v-df84d0ea"]]);var D=T,F=(l(2247),l(8179)),R=(l(6809),l(1426));const Z=e=>((0,a.pushScopeId)("data-v-cc0ae7ec"),e=e(),(0,a.popScopeId)(),e),L={key:0,class:"detail_item"},G={class:"creator"},O=["src"],A=Z((()=>(0,a.createElementVNode)("span",null," + 关注 ",-1))),$={class:"title"},Q={class:"publish_playCount"},H={class:"videoGroup"},J=["onClick"],K={key:1,class:"detail_item"},W={class:"creator"},X=["src"],Y={class:"title"},ee={class:"publish_playCount"},te={class:"videoGroup"},le=["onClick"];var oe={__name:"detailVideo",emits:["onVideoUrl","onVideoDetail"],setup(e,{emit:t}){const l=(0,u.useStore)(),o=(0,m.yj)(),n=(0,m.tv)(),i=(0,r.ref)(),d=(0,r.ref)(),v=(0,r.ref)(),p=(0,r.ref)(),f=e=>{l.dispatch("video/getVideoDetail",e).then((e=>{i.value=e.data,t("onVideoDetail",i.value)})),l.dispatch("video/getVideoUrl",e).then((e=>{d.value=e.urls[0]?.url,console.log(d.value),t("onVideoUrl",d.value)}))},V=e=>{l.dispatch("video/getMvData",e).then((e=>{v.value=e.data,t("onVideoDetail",v.value)})),l.dispatch("video/getMvUrl",e).then((e=>{p.value=e.data.url,t("onVideoUrl",p.value)}))};(0,a.watch)((()=>o.query),(e=>{e.vid?f(e.vid):e.mvId&&V(e.mvId)}),{immediate:!0});const k=e=>{console.log(e),l.commit("video/setTags",{id:e.id,name:e.name}),n.push({path:"/video/listVideo",query:{tag:e.id}})},N=e=>{if(console.log(e),!o.query.mvId)return console.log("object--------------"),void n.push({path:"/profilePage",query:{id:e.creator.userId}});n.push({path:"/singerDetailPage",query:{id:e.artistId}})};return(e,t)=>{const l=F.mi;return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,r.unref)(i)?((0,a.openBlock)(),(0,a.createElementBlock)("div",L,[(0,a.createElementVNode)("div",G,[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("img",{src:(0,r.unref)(i).creator.avatarUrl,alt:"",onClick:t[0]||(t[0]=e=>N((0,r.unref)(i)))},null,8,O),(0,a.createElementVNode)("span",{class:"author_name",onClick:t[1]||(t[1]=e=>N((0,r.unref)(i)))},(0,c.zw)((0,r.unref)(i).creator.nickname),1)]),(0,a.createVNode)(l,{type:"primary",round:"",class:"foll"},{default:(0,a.withCtx)((()=>[A])),_:1})]),(0,a.createElementVNode)("div",$,[(0,a.createElementVNode)("h2",null,(0,c.zw)((0,r.unref)(i).title),1)]),(0,a.createElementVNode)("div",Q,[(0,a.createElementVNode)("span",null,"发布时间: "+(0,c.zw)((0,r.unref)(R.U)((0,r.unref)(i).publishTime)),1),(0,a.createElementVNode)("span",null,"播放量："+(0,c.zw)((0,r.unref)(s.u)((0,r.unref)(i).playTime)),1)]),(0,a.createElementVNode)("div",H,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,r.unref)(i).videoGroup,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e,class:"group_item",onClick:t=>k(e)},(0,c.zw)(e.name),9,J)))),128))])])):(0,a.createCommentVNode)("",!0),(0,r.unref)(v)?((0,a.openBlock)(),(0,a.createElementBlock)("div",K,[(0,a.createElementVNode)("div",W,[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("img",{src:(0,r.unref)(v).cover,alt:"",onClick:t[2]||(t[2]=e=>N((0,r.unref)(v)))},null,8,X),(0,a.createElementVNode)("span",{class:"author_name",onClick:t[3]||(t[3]=e=>N((0,r.unref)(v)))},(0,c.zw)((0,r.unref)(v).artistName),1)])]),(0,a.createElementVNode)("div",Y,[(0,a.createElementVNode)("h2",null,(0,c.zw)((0,r.unref)(v).name),1)]),(0,a.createElementVNode)("div",ee,[(0,a.createElementVNode)("span",null,"发布时间: "+(0,c.zw)((0,r.unref)(v).publishTime),1),(0,a.createElementVNode)("span",null,"播放量："+(0,c.zw)((0,r.unref)(s.u)((0,r.unref)(v).playCount)),1)]),(0,a.createElementVNode)("div",te,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,r.unref)(v).videoGroup,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e,class:"group_item",onClick:t=>k(e)},(0,c.zw)(e.name),9,le)))),128))])])):(0,a.createCommentVNode)("",!0)],64)}}};const ne=(0,M.Z)(oe,[["__scopeId","data-v-cc0ae7ec"]]);var ae=ne,ce=l(6097),re=(l(2760),l(877)),ie=(l(9395),l(9566)),se=l(4007);const de={class:"comment_title"},me={class:"new_comment"},ue={class:"comment_title"};var ve={__name:"comment",props:{},emits:["onClickPlgination"],setup(e,{emit:t}){const l=(0,m.yj)(),o=(0,u.useStore)(),n=(0,r.ref)({limit:30,offset:1}),i=(0,r.ref)(!0),s=(0,r.ref)(),d=(0,r.ref)(!1),v=(0,r.ref)(),p=async(e,t)=>{s.value=await o.dispatch("video/getMvComment",{id:e,limit:n.value.limit,offset:t*n.value.limit}),s.value?d.value=!1:i.value=!1},f=async(e,t)=>{s.value=await o.dispatch("video/getVoideComment",{id:e,limit:n.value.limit,offset:t*n.value.limit}),s.value?d.value=!1:i.value=!1};return(0,a.watch)((()=>l.query),(e=>{e.vid?f(e.vid,0):e.mvId&&p(e.mvId,0)}),{immediate:!0}),(0,a.watch)((()=>n.value.offset),(e=>{d.value=!0,t("onClickPlgination",v.value.offsetTop),l.query.vid?f(l.query.vid,e-1):p(l.query.id,e-1)})),(e,t)=>{const l=re.vk,o=ce.R;return(0,r.unref)(i)&&(0,r.unref)(s)?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"comment",ref_key:"agocomment",ref:v},[1==(0,r.unref)(n).offset?((0,a.openBlock)(),(0,a.createBlock)(ie.Z,{key:0,comment:(0,r.unref)(s).hotComments,class:"hot_comments"},(0,a.createSlots)({_:2},[(0,r.unref)(s).hotComments.length?{name:"comment-title",fn:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",de,"精彩评论("+(0,c.zw)((0,r.unref)(s).hotComments.length)+")",1)])),key:"0"}:void 0]),1032,["comment"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",me,[(0,a.createElementVNode)("span",ue,"最新评论("+(0,c.zw)((0,r.unref)(s).total)+")",1),(0,a.createVNode)(l,{loading:(0,r.unref)(d),count:10},{template:(0,a.withCtx)((()=>[(0,a.createVNode)(se.Z)])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(ie.Z,{comment:(0,r.unref)(s).comments},null,8,["comment"])])),_:1},8,["loading"]),(0,a.createVNode)(o,{background:"",layout:"prev, pager, next",currentPage:(0,r.unref)(n).offset,"onUpdate:currentPage":t[0]||(t[0]=e=>(0,r.unref)(n).offset=e),"page-size":(0,r.unref)(n).limit,"onUpdate:page-size":t[1]||(t[1]=e=>(0,r.unref)(n).limit=e),total:(0,r.unref)(s).total,class:"pagination"},null,8,["currentPage","page-size","total"])])],512)):(0,a.createCommentVNode)("",!0)}}};const pe=(0,M.Z)(ve,[["__scopeId","data-v-253772d3"]]);var fe=pe;const Ve={class:"voide_left"},ke={class:"detail"},Ne={class:"detail_item"},ge={class:"comment"},he={class:"recommend"};var Ee={__name:"mainVideo",props:{},setup(e,{emit:t}){const l=(0,u.useStore)(),i=(0,m.yj)(),s=(0,m.tv)(),d=(0,r.ref)(),v=(0,r.ref)(),p=e=>{console.log(e),v.value.scrollTop=e-60},f=e=>{d.value=e.target.scrollTop};(0,a.onActivated)((()=>{l.state.playMusic.isPlay=!1,l.commit("setisPlayMusic",!1),v.value.scrollTop=d.value})),(0,a.onUnmounted)((()=>{l.state.playMusic.isPlay=!1,l.commit("setisPlayMusic",!0)})),(0,a.onDeactivated)((()=>{l.commit("setisPlayMusic",!0)}));const V=(0,a.computed)((()=>i.query.mvId?"MV详情":"视频详情")),k=(0,r.ref)(),N=(0,r.ref)(),g=e=>{k.value=e},h=e=>{N.value=e},E=(0,r.reactive)({width:"650px",height:"350px",color:"#409eff",title:"",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.5,control:!0,controlBtns:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]}),y=()=>{s.back(-1)};return(e,t)=>{const l=(0,a.resolveComponent)("ArrowLeftBold"),i=n.gn,s=(0,a.resolveComponent)("vue3-video-play"),d=o.mR;return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",{class:"lessen",ref_key:"lessRef",ref:v,onScroll:f},[(0,a.createElementVNode)("div",Ve,[(0,a.createElementVNode)("h2",ke,[(0,a.createVNode)(i,{class:"exit",onClick:y},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l)])),_:1}),(0,a.createTextVNode)(" "+(0,c.zw)((0,r.unref)(V)),1)]),(0,r.unref)(k)?((0,a.openBlock)(),(0,a.createBlock)(s,(0,a.mergeProps)({key:0},(0,r.unref)(E),{poster:(0,r.unref)(k).coverUrl||(0,r.unref)(k).cover,src:(0,r.unref)(N)}),null,16,["poster","src"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Ne,[(0,a.createVNode)(ae,{onOnVideoDetail:g,onOnVideoUrl:h})]),(0,a.createElementVNode)("div",ge,[(0,a.createVNode)(fe,{onOnClickPlgination:p})])]),(0,a.createElementVNode)("div",he,[(0,a.createVNode)(D)])],544),(0,a.createVNode)(d,{right:50,bottom:110,"visibility-height":1e3,target:".lessen"})],64)}}};const ye=(0,M.Z)(Ee,[["__scopeId","data-v-76e29467"]]);var Ce=ye}}]);
//# sourceMappingURL=5.168deac3.js.map