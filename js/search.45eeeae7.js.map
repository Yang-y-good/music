{"version":3,"file":"js/search.45eeeae7.js","mappings":"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","sources":["webpack://music/./src/views/search/searchPage/search-page.vue","webpack://music/./src/views/search/searchPage/search-page.vue?621f"],"sourcesContent":["import { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-645bbc02\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"total\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \" / \", -1));\n\nconst _hoisted_5 = [\"onClick\"];\nimport { computed, nextTick, onMounted, ref, watch, watchEffect } from \"@vue/runtime-core\";\nimport { formatSongTime } from \"@/utils/formatSongTime\";\nimport songlist from \"@/components/song-List.vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nexport default {\n  __name: 'search-page',\n\n  setup(__props) {\n    const route = useRoute();\n    const store = useStore();\n    const router = useRouter();\n    const pageInfo = ref({\n      limit: 30,\n      offset: 1\n    }); // 获取页面元素\n\n    const searchPageRef = ref(); // 请求搜索的歌曲\n\n    const reqSearchSongs = offset => {\n      store.dispatch(\"search/getSearchList\", {\n        keyword: route.query.value,\n        limit: pageInfo.value.limit,\n        offset: offset * pageInfo.value.limit\n      });\n    };\n\n    watch(() => route.query.value, () => {\n      reqSearchSongs(0);\n    });\n    reqSearchSongs(0); // 拿到搜索的歌曲\n\n    const songsList = computed(() => store.state.search.songsList); // 是否显示分页\n\n    const isPagination = ref(false); // 将搜索的歌曲提交到songsList\n\n    watch(() => songsList.value, value => {\n      store.commit(\"songMenu/changePrivileges\", value); // 等到请求结果有数据了在显示\n\n      if (value.length != 0) {\n        isPagination.value = true;\n      }\n    }); // 监听分页的点击\n\n    watch(() => pageInfo.value.offset, value => {\n      console.log(value); // 隐藏分页\n\n      isPagination.value = false; // 清空歌曲\n\n      store.state.search.songsList = []; // offsetTop 元素到顶部的距离\n      // scrollTop元素距离顶部滚动的距离\n\n      searchPageRef.value.scrollTop = 0;\n      reqSearchSongs(value - 1);\n    }); // 拿到搜索歌曲的总数\n\n    const songCount = computed(() => store.state.search.songCount); // 歌曲点击事件\n\n    const onhandleClick = row => {\n      store.dispatch(\"playMusic/dispatchMusicInfo\", row); // 将搜索的歌曲添加到播放列表\n\n      store.commit(\"songMenu/CurrentMenuList\", songsList.value);\n    }; // 跳转到歌手界面\n\n\n    const singerClick = id => {\n      console.log(id);\n      router.push({\n        path: \"/singerDetailPage\",\n        query: {\n          id\n        }\n      });\n    }; // 跳转到专辑页面\n\n\n    const albumClick = id => {\n      console.log(id);\n      router.push({\n        path: \"/albumDetailPage\",\n        query: {\n          ids: id\n        }\n      });\n    };\n\n    return (_ctx, _cache) => {\n      const _component_el_pagination = _resolveComponent(\"el-pagination\");\n\n      const _component_song_list = _resolveComponent(\"song-list\");\n\n      const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\");\n\n      return _openBlock(), _createBlock(_component_el_scrollbar, {\n        class: \"search_page\",\n        ref_key: \"searchPageRef\",\n        ref: searchPageRef\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", {\n          ref: \"searchTitle\"\n        }, \"搜索 \" + _toDisplayString(_unref(route).query.value), 513), _createElementVNode(\"div\", _hoisted_1, \"共找到 \" + _toDisplayString(_unref(songCount)) + \"单曲\", 1), _createVNode(_component_song_list, {\n          songList: _unref(songsList),\n          class: \"songs_list\",\n          ref: \"paginationRef\",\n          onOnhandleClick: onhandleClick\n        }, {\n          author: _withCtx(scoped => [_createElementVNode(\"span\", {\n            onClick: $event => singerClick(scoped.row.author[0].id),\n            class: \"cursorHover\"\n          }, _toDisplayString(scoped.row.author[0].name), 9, _hoisted_2), scoped.row.author[1] ? (_openBlock(), _createElementBlock(\"span\", {\n            key: 0,\n            onClick: $event => singerClick(scoped.row.author[1].id),\n            class: \"cursorHover\"\n          }, [_hoisted_4, _createTextVNode(\" \" + _toDisplayString(scoped.row.author[1].name), 1)], 8, _hoisted_3)) : _createCommentVNode(\"\", true)]),\n          album: _withCtx(scoped => [_createElementVNode(\"span\", {\n            onClick: $event => albumClick(scoped.row.songsInfo.id),\n            class: \"cursorHover\"\n          }, _toDisplayString(scoped.row.album), 9, _hoisted_5)]),\n          default: _withCtx(() => [_unref(isPagination) ? (_openBlock(), _createBlock(_component_el_pagination, {\n            key: 0,\n            background: \"\",\n            layout: \"prev, pager, next\",\n            total: _unref(songCount),\n            currentPage: _unref(pageInfo).offset,\n            \"onUpdate:currentPage\": _cache[0] || (_cache[0] = $event => _unref(pageInfo).offset = $event),\n            \"page-size\": _unref(pageInfo).limit,\n            \"onUpdate:page-size\": _cache[1] || (_cache[1] = $event => _unref(pageInfo).limit = $event),\n            class: \"pageination\"\n          }, null, 8, [\"total\", \"currentPage\", \"page-size\"])) : _createCommentVNode(\"\", true)]),\n          _: 1\n        }, 8, [\"songList\"])]),\n        _: 1\n      }, 512);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./search-page.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./search-page.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./search-page.vue?vue&type=style&index=0&id=645bbc02&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\网易云\\\\music\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-645bbc02\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","__name","setup","__props","route","store","useStore","router","pageInfo","ref","limit","offset","searchPageRef","reqSearchSongs","dispatch","keyword","query","value","watch","songsList","computed","state","search","isPagination","commit","length","console","log","scrollTop","songCount","onhandleClick","row","singerClick","id","push","path","albumClick","ids","_ctx","_cache","_component_el_pagination","_component_song_list","_component_el_scrollbar","ref_key","default","songList","onOnhandleClick","author","scoped","onClick","$event","name","key","album","songsInfo","background","layout","total","currentPage","_","__exports__"],"sourceRoot":""}